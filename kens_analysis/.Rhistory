setwd(wd)
setwd("..")
data_directory = '../data/'
library(ggplot2)
setwd("~/Documents/smt-data-challenge/kens_analysis")
library(dplyr)
library(patchwork)
game_info <- arrow::open_csv_dataset(paste0(data_directory, "game_info"),
partitioning = c("Season", "HomeTeam", "AwayTeam", "Day"),
hive_style = F,
unify_schemas = T,
na = c("", "NA", "NULL", NA, "\\N"))
game_events <- arrow::open_csv_dataset(paste0(data_directory,"game_events"),
partitioning = c("Season", "HomeTeam", "AwayTeam", "Day"),
hive_style = F,
unify_schemas = T,
na = c("", "NA", "NULL", NA, "\\N"))
ball_pos <- arrow::open_csv_dataset(paste0(data_directory,"ball_pos"),
partitioning = c("Season", "HomeTeam", "AwayTeam", "Day"),
hive_style = F,
unify_schemas = T,
na = c("", "NA", "NULL", NA, "\\N"))
game_info_ball <- game_info |>
filter(inning > 0, top_bottom == "bottom", !is.na(batter)) |>
collect() |>
select(game_str, play_per_game, top_bottom, batter)
View(game_info_ball)
game_events_ball <- game_events|>
filter() |>
collect() |>
select(game_str, play_id, play_per_game, event_code, timestamp)
source("~/Documents/smt-data-challenge/kens_analysis/Ball Release.R", echo=TRUE)
source("~/Documents/smt-data-challenge/kens_analysis/Batter Hand.R", echo=TRUE)
source("~/Documents/smt-data-challenge/kens_analysis/Ball Release.R", echo=TRUE)
source("~/Documents/smt-data-challenge/kens_analysis/batter_hand.R", echo=TRUE)
rm(list=ls())
source("~/Documents/smt-data-challenge/kens_analysis/batter_hand.R", echo=TRUE)
source("~/Documents/smt-data-challenge/kens_analysis/ball_release.R", echo=TRUE)
for(i in 1:nrow(fair_hits)) {
cur_row <- fair_hits[i,]
cur_row$ball_dist <- sqrt((curRow$ball_position_x^2) + (curRow$ball_position_y^2))
fair_hits[i,] <- cur_row
}
source("~/Documents/smt-data-challenge/kens_analysis/ball_release.R", echo=TRUE)
write.csv(batter_hits, "Combined_Batter_Hits.csv")
write.csv(grouped_hits, "hit_outcomes.csv")
grouped_hits <- batter_hits |>
group_by(batter,hand) |>
summarize(
pull <- sum(push_pull == "pull"),
push <- sum(push_pull == "push")
) |>
filter(batter < 1000)
names(grouped_hits) <- c("battter", "hand", "pull", "push")
write.csv(grouped_hits, "hit_outcomes.csv")
pitcher_pitch_info <- read.csv("../dougs_analysis/pitcher-location.csv")
View(pitcher_pitch_info)
write.csv(batter_hits, "combined_batter_hits.csv")
write.csv(batter_hits, "combined_batter_hits.csv")
batter_pitch_info <- read.csv("combined_batter_hits.csv")
pitcher_pitch_info <- read.csv("../dougs_analysis/pitcher-location.csv")
